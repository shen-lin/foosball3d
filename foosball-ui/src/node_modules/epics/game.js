import { Subject } from "rxjs";
import { mergeMap, filter } from "rxjs/operators";

/**
 * updateXEpic, updateYEpic
 */

export const updateXEpic = action$ =>
  action$.pipe(
    filter(action => action.type === "GAME_CONTROL_X_UPDATE"),

    mergeMap(action => {
      const subject = new Subject();
      console.log('Call GAME_CONTROL_X_UPDATE', action);

      // window.babylon.scene.getMeshByName("baseBoard").rotate (BABYLON.Axis.X, Math.PI * (-30/360), BABYLON.Space.WORLD)
      
      // window.babylon.scene.getMeshByName("baseBoard").rotation

      return subject;
    })
  );

export const updateYEpic = action$ =>
  action$.pipe(
    filter(action => action.type === "GAME_CONTROL_Y_UPDATE"),

    mergeMap(action => {
      const subject = new Subject();
      console.log('Call GAME_CONTROL_Y_UPDATE', action);

      const scene = window.babylon.scene;
      const baseBoard = scene.getMeshByName("baseBoard");
      baseBoard.position.y = 201.5 + action.newY / 10;
      console.log("baseboard", baseBoard.position.y);

      return subject;
    })
  );
