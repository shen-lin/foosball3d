import React, { Component } from "react";
import "./JoinGame.css";
import { connect } from "react-redux";
import { updateRoomList } from "action/RoomActions";

import { BrowserRouter as Router, Route, Link } from "react-router-dom";

class JoinGame extends Component {
  constructor(props) {
    super(props);
  }

  componentDidMount() {
    this.getLobbies();
  }

  getLobbies() {
    console.log("Get Lobbies");
    // client.getAvailableRooms(
    //   "standard",
    //   function(rooms, err) {
    //     if (err) console.error(err);
    //     rooms.forEach(function(room) {
    //       console.log(
    //         room.roomId,
    //         room.clients,
    //         room.maxClients,
    //         room.metadata
    //       );
    //     });
    //     rooms = ["a", "b"];
    //     this.props.dispatch(updateRoomList(rooms));
    //   }.bind(this)
    // );
  }

  render() {
    console.log("Rooms", this.props.rooms);
    return (
      <div className="joingame">
        {this.props.rooms.map((item, index) => (
          <div className="indent" key={index}>{item}</div>
        ))}

        <li>
          <Link to="/">Home</Link>
        </li>
      </div>
    );
  }
}

function mapStateToProps(state) {
  const { rooms } = state;

  return {
    rooms
  };
}

export default connect(mapStateToProps)(JoinGame);
